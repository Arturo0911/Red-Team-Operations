#!/usr/bin/python3
# :author: Arturo Negreiros





import socket
import threading
import sys
from typing import Any
PORTS = range(1, 65536)


def connections() -> Any:
    conn = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
    return conn


def handle_connections(host: str, port: int) ->None:

    conn = connections()
    try:
        conn.connect((host, port))
        service_name = socket.getnameinfo((host, port), socket.NI_NUMERICHOST)
        print(f"Host => {service_name} port => {port}")
    except:
        pass


def enumeration(host: str):
    
    for port in PORTS:
        handle_connections(host, port)



def main():
    
    try:
        host = sys.argv[1]
        scan_thread = threading.Thread(target=enumeration, args=(host, ))
        scan_thread.start()
    except Exception as e:
        print(str(e))
        print("""\n\n The right mode to use this code is: \n\n python3 scanner.py <host>\n\ngenerally the host is referenced to ip""")
        exit(1)
    except KeyboardInterrupt:
        exit(0)


if __name__ == "__main__":
    main()




